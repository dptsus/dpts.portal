@using DPTS.Web.Models
@model SearchModel
@*@using (Html.BeginForm("Search","Home", FormMethod.Get, new { id = "small-search-box-form", @class = "form-searchdoctors directory-map" }))
{
    <div class="col-md-3 col-sm-5 col-xs-3 tg-verticalmiddle">
        <div class="row">
            <ul id="tg-sortable" class="tg-tabs-nav tg-sortable" role="tablist">
                <li data-dir_name="Doctor" data-id="127" class="active current-directory">
                    <input type="radio" checked name="directory_type" id="127" value="doctor" />
                    <label for="127">
                        <i class="icon-stethoscope"></i>
                        <span class="tg-category">
                            <span class="tg-category-name">Doctor</span>
                            <span class="tg-category-doctores">@Model.AvailableSpeciality.Count() Specialists</span>
                        </span>
                    </label>
                </li>
            </ul>
        </div>
    </div>
    <div class="col-md-9 col-sm-7 col-xs-9 tg-verticalmiddle">
        <div class="row">
            <fieldset>
                <div class="tab-content tg-tab-content">
                    <div role="tabpanel" class="tab-pane active" id="nephrologist">
                        <div class="row">
                            <div class="col-md-6 col-sm-12 col-xs-12 tg-verticalmiddle">
                                <div class="form-group">
                                    @Html.DropDownListFor(model => model.SpecialityId, Model.AvailableSpeciality, new { @class = "form-control" })
                                </div>
                                <div class="form-group">
                                    <input type="text" name="keyword" id="keyword" class="form-control" placeholder="Type Keyword...">
                                </div>
                                <div class="form-group">
                                    <input type="text" name="ZipCode" id="ZipCode" class="form-control" placeholder="Search users by zip code">
                                </div>
                                <div class="form-group">
                                    <button type="submit" class="tg-btn process-account-settings">Search</button>
                                </div>
                            </div>
                            <div class="col-md-6 col-sm-12 col-xs-12 tg-verticalmiddle">
                                <h1>
                                    FIND YOUR<span>NEAREST</span>
                                    <em class="current_directory"></em>
                                </h1>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
        </div>
    </div>
}*@

<div class="tg-searcharea-v2">
@using (Html.BeginForm("Search", "Home", FormMethod.Get, new { id = "directory-map", @class = "tg-searchform directory-map" }))
{
        <fieldset>
            <div class="form-group">
                <input type="text" name="keyword" id="keyword" class="form-control" placeholder="Type Keyword...">
            </div>
            <div class="form-group">
                <div class="locate-me-wrap">
                    <div class="locate-me-wrap">
                        <div id="location-pickr-map" class="elm-display-none"></div>
                        @*<input type="text" name="ZipCode" id="ZipCode" class="form-control" placeholder="Search users by zip code">*@
                        <input type="text" autocomplete="on" id="location-address" value="" name="geo_location" placeholder="Geo location" class="form-control">
                        <a href="javascript:;" class="geolocate"><img src="https://themographics.com/wordpress/docdirect/wp-content/themes/docdirect/images/geoicon.svg" width="16" height="16" class="geo-locate-me" alt="Locate me!"></a>
                        <a href="javascript:;" class="geodistance"><i class="fa fa-angle-down" aria-hidden="true"></i></a>
                        <div class="geodistance_range elm-display-none">
                            <div class="distance-ml">Distance in&nbsp;( Miles )<span>50</span></div>
                            <input type="hidden" name="geo_distance" value="50" class="geo_distance" />
                            <div class="geo_distance" id="geo_distance"></div>
                        </div>
                    </div>
                    <script>
			jQuery(document).ready(function(e) {
				jQuery( "#geo_distance" ).slider({
				   range: "min",
				   min:1,
				   max:300,
				   value:50,
				   animate:"slow",
				   orientation: "horizontal",
				   slide: function( event, ui ) {
					  jQuery( ".distance-ml span" ).html( ui.value );
					  jQuery( ".geo_distance" ).val( ui.value );
				   }
				});
			});
                    </script>
                    @*<script>
                        jQuery(document).ready(function(e) {
                            //init
                            jQuery.docdirect_init_map(51.5001524,-0.1262362);
                        });
                                                    </script>*@
                    <script>
      function initMap() {
          navigator.geolocation.getCurrentPosition(function (pos) {
              var geocoder = new google.maps.Geocoder();
              var lat = pos.coords.latitude;
              var lng = pos.coords.longitude;
              var latlng = new google.maps.LatLng(lat, lng);

              //reverse geocode the coordinates, returning location information.
              geocoder.geocode({ 'latLng': latlng }, function (results, status) {
                  var result = results[0];
                  var postalCode = '';

                  for (var i = 0, len = result.address_components.length; i < len; i++) {
                      var ac = result.address_components[i];

                      if (ac.types.indexOf('postal_code') >= 0) {
                          postalCode = ac.short_name;
                      }
                  }

                  $('#location-address').val(postalCode);
                  if(postalCode != '')
                  {
                      $('.geo-locate-me').css('visibility', 'visible');
                  }
              });
          });
      }


                    </script>
                    <script async defer
                            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDvanm9mpt0gdHXeUTLbmedVCYU8OKNS3U&callback=initMap">
                    </script>

                </div>
            </div>
            <div class="form-group">
                <span class="select">
                    <select class="directory_type" name="directory_type">
                        <option value="">All</option>
                        <option id="127" data-dir_name="Doctor" value="doctor">Doctor</option>
                    </select>
                </span>
            </div>
            <div class="form-group">
                <span class="select">
                    @Html.DropDownListFor(model => model.SpecialityId, Model.AvailableSpeciality, new { @class = "group subcats" })
                    @*<select class="group subcats" name="speciality">
                        <option value="">
                            Specialities
                        </option>
                        <option value="cardiologist">Cardiologist</option>
                        <option value="colorectal-surgeon">Colorectal surgeon</option>
                        <option value="dentist">Dentist</option>
                        <option value="dermatologist">Dermatologist</option>
                        <option value="dietician">Dietician</option>
                        <option value="eye-doctor">Eye Doctor</option>
                        <option value="eye-nose-ear-ent-specialist">Eye, Nose, Ear (ENT) specialist</option>
                        <option value="nephrologist">Nephrologist</option>
                        <option value="neurosurgeon">Neurosurgeon</option>
                        <option value="nutritionist">Nutritionist</option>
                        <option value="oncologist">Oncologist</option>
                        <option value="ophthalmologist">Ophthalmologist</option>
                        <option value="orthodontist">Orthodontist</option>
                        <option value="orthopedic-surgeon">Orthopedic Surgeon</option>
                        <option value="pediatrician">Pediatrician</option>
                        <option value="physiotherapist">Physiotherapist</option>
                        <option value="plastic-surgeon">Plastic surgeon</option>
                        <option value="primary-care-doctor">Primary care doctor</option>
                        <option value="psychiatrist">Psychiatrist</option>
                        <option value="psychologist">Psychologist</option>
                    </select>*@
                </span>
            </div>
            <div class="form-group">
                <input type="submit" id="search_banner" class="tg-btn" value="search">
            </div>
        </fieldset>
}
</div>
